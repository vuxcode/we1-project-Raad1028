<!DOCTYPE html
<html>
<head>
    <title>Navigation menu</title>
    <link href="style.css" rel="stylesheet">

</head>
<body class="inter-font1">
    <div class="sidebar">
        <div class="sidebarbtn">
            <a class="sidebarbox" href="index.html" target="_parent">
                <img class="logo" src="placeholderLogo.png" alt="placeholder logo">
            </a>
        </div>
        <div class="sidebarbtn genrebtn">
            <a class="sidebarbox" href="strategy.html" target="_parent">
                <h3 class="sidebartext">Strategy</h3>
            </a>
        </div>
        <div class="sidebarbtn genrebtn">
            <a class="sidebarbox" href="rpg.html" target="_parent">
                <h3 class="sidebartext">RPG</h3>
            </a>
        </div>
        <div class="sidebarbtn genrebtn">
            <a class="sidebarbox" href="roguelike.html" target="_parent">
                <h3 class="sidebartext">Rogue-like</h3>
            </a>
        </div>
        <div class="sidebarlist hidden">
            <ul>
                <li id="liststart">
                    <details open>
                        <summary>Games</summary>
                        <ul>
                            <li>
                                <details>

                                    <summary>Strategy <a href="strategy.html" target="_parent">>></a></summary>
                                    <ul class="finallist">
                                        <li><a href="strategy/ck3.html" target="_parent">Crusader Kings 3</a></li>
                                        <li><a href="strategy/civ6.html" target="_parent">Civilization 6</a></li>
                                    </ul>
                                </details>
                                <details>

                                    <summary>RPG <a href="rpg.html" target="_parent">>></a></summary>
                                    <ul class="finallist">
                                        <li><a href="rpg/elden-ring.html" target="_parent">Elden Ring</a></li>
                                        <li><a href="rpg/kcd.html" target="_parent">Kingdom Come</a></li>
                                    </ul>
                                </details>
                                <details>

                                    <summary>Roguelike <a href="roguelike.html" target="_parent">>></a></summary>
                                    <ul class="finallist">
                                        
                                        <li><a href="roguelike/boi.html" target="_parent">Binding of Isaac</a></li>
                                        <li><a href="roguelike/sts.html" target="_parent">Slay the Spire</a></li>
                                    </ul>
                                </details>
                            </li>
                        </ul>
                    </details>
                </li>
            </ul>
        </div>
        <div class="extendbtn">
            <a class="extend" href="#">Extend</a>
        </div>
        
    </div>
    <script>
        var sidebarExtended = "off"
        var extendbtn = document.getElementsByClassName("extendbtn")[0];
        var sidebar = document.getElementsByClassName("sidebar")[0];
        var logo = document.getElementsByClassName("logo")[0];
        var sidebarbox0 = document.getElementsByClassName("sidebarbox")[0];
        var sidebarbox1 = document.getElementsByClassName("sidebarbox")[1];
        var sidebarbtn0 = document.getElementsByClassName("sidebarbtn")[0];
        var genrebtn0 = document.getElementsByClassName("genrebtn")[0];
        var genrebtn1 = document.getElementsByClassName("genrebtn")[1];
        var genrebtn2 = document.getElementsByClassName("genrebtn")[2];
        var extendText = document.getElementsByClassName("extend")[0];
        var sidebarlist = document.getElementsByClassName("sidebarlist")[0];

        var extendEvent = new CustomEvent("extendMain")
        var minimizeEvent = new CustomEvent("minimizeMain")

        extendbtn.addEventListener("click", switchState);


        function minimize() {
            sidebar.classList.remove("extended")
            logo.classList.remove("extended")
            sidebarbox0.classList.remove("extended")
            sidebarbox1.classList.remove("extended")
            sidebarbtn0.classList.remove("extended")
            genrebtn0.classList.remove("hidden")
            genrebtn1.classList.remove("hidden")
            genrebtn2.classList.remove("hidden")
            extendbtn.classList.remove("extended")
            sidebarExtended = "off"
            extendText.innerHTML = "Extend"
            window.parent.document.dispatchEvent(minimizeEvent)
            sidebarlist.classList.add("hidden")
            localStorage.setItem("sidebarExtended", "off")
        }

        function extend() {
            sidebar.classList.add("extended")
            logo.classList.add("extended")
            sidebarbox0.classList.add("extended")
            sidebarbox1.classList.add("extended")
            sidebarbtn0.classList.add("extended")
            genrebtn0.classList.add("hidden")
            genrebtn1.classList.add("hidden")
            genrebtn2.classList.add("hidden")
            extendbtn.classList.add("extended")
            sidebarExtended = "on"
            extendText.innerHTML = "Minimize"
            window.parent.document.dispatchEvent(extendEvent)
            sidebarlist.classList.remove("hidden")
            localStorage.setItem("sidebarExtended", "on") 
        }
        
        function getState() {
            sidebarExtended = localStorage.getItem("sidebarExtended")
            if (sidebarExtended == "on") {
                extend();
            }
            else {
                minimize();
            }    
        }

        function switchState() {
            if (sidebarExtended == "off") {
                extend()
            }
            else if (sidebarExtended == "on") {
                minimize()
            }
        }
        
        getState();
        
        
    </script>
</body>

</html>